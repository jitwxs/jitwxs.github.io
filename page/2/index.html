<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Jitwxs</title><meta name="author" content="Jitwxs"><meta name="copyright" content="Jitwxs"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="不忘初心，砥砺前行">
<meta property="og:type" content="website">
<meta property="og:title" content="Jitwxs">
<meta property="og:url" content="https://jitwxs.cn/page/2/index.html">
<meta property="og:site_name" content="Jitwxs">
<meta property="og:description" content="不忘初心，砥砺前行">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/configuration/avatar.jpg">
<meta property="article:author" content="Jitwxs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/configuration/avatar.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/configuration/favicon.ico"><link rel="canonical" href="https://jitwxs.cn/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?053091e29f160d71ed2f65a774cfeac1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-40VH67TNSM"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-40VH67TNSM');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"POGNXMLA2T","apiKey":"2013ebed0f76818838d693c9c40cb1fd","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Jitwxs","link":"链接: ","source":"来源: Jitwxs","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"top-right"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Jitwxs',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-09-25 12:19:42'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    document.addEventListener('pjax:complete', detectApple)})(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Jitwxs" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/configuration/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">229</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">133</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">40</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fas fa-ellipsis-v"></i><span> 更多</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/favorites/"><i class="fa-fw fas fa-meteor"></i><span> 收藏夹</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-cogs"></i><span> 管理</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/changes/"><i class="fa-fw fas fa-location-arrow"></i><span> 更新日志</span></a></li><li><a class="site-page child" href="/statistical/"><i class="fa-fw fas fa-globe-asia"></i><span> 站点统计</span></a></li></ul></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jitwxs</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fas fa-ellipsis-v"></i><span> 更多</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/favorites/"><i class="fa-fw fas fa-meteor"></i><span> 收藏夹</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-cogs"></i><span> 管理</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/changes/"><i class="fa-fw fas fa-location-arrow"></i><span> 更新日志</span></a></li><li><a class="site-page child" href="/statistical/"><i class="fa-fw fas fa-globe-asia"></i><span> 站点统计</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/744744f8.html" title="Arthas 初探（6）——火焰图">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover1.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Arthas 初探（6）——火焰图"></a></div><div class="recent-post-info"><a class="article-title" href="/744744f8.html" title="Arthas 初探（6）——火焰图">Arthas 初探（6）——火焰图</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-user article-meta__icon"></i><span class="article-meta-label">Jitwxs</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-27T13:36:24.000Z" title="发表于 2020-12-27 21:36:24">2020-12-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Java/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/">性能分析</a></span></div><div class="content"> 一、前言
profiler 命令支持生成应用热点的火焰图。本质上是通过不断的采样，然后把收集到的采样结果生成火焰图。
目前 profiler 命令还不支持在 Windows 下执行。
12[arthas@18132]$ profiler listAsyncProfiler error: Current OS do not support AsyncProfiler, Only support Linux/Mac.
 二、基本使用
profiler 命令基本运行结构是 profiler action [actionArg]
 2.1 参数说明



参数名称
参数说明




action
要执行的操作


actionArg
属性名模式


[i:]
采样间隔（单位：ns）（默认值：10’000’000，即10 ms）


[f:]
将输出转储到指定路径


[d:]
运行评测指定秒


[e:]
要跟踪哪个事件（cpu, alloc, lock, cache-misses等），默认是 cpu



 2.2 采样
（1）启动 profiler
12[arthas@44]$ prof ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/5ed3293c.html" title="Arthas 初探（5）——核心命令">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Arthas 初探（5）——核心命令"></a></div><div class="recent-post-info"><a class="article-title" href="/5ed3293c.html" title="Arthas 初探（5）——核心命令">Arthas 初探（5）——核心命令</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-user article-meta__icon"></i><span class="article-meta-label">Jitwxs</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-27T12:01:49.000Z" title="发表于 2020-12-27 20:01:49">2020-12-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Java/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/">性能分析</a></span></div><div class="content"> 一、前言
在本章节中，将学习以下 Arthas 的核心命令，同时我也会附上官方文档的链接，方便大家查阅：


monitor 方法执行监控


watch 方法执行数据观测


trace 方法内部调用路径，并输出方法路径上的每个节点上耗时


stack 输出当前方法被调用的调用路径


tt 记录下指定方法每次调用的入参和返回信息，并能对这些不同时间下调用的信息进行观测


watch/trace/monitor/stack/tt 命令都支持 -v 参数。当命令执行之后，没有输出结果。有两种可能：

匹配到的函数没有被执行
条件表达式结果是 false

但用户区分不出是哪种情况。使用 -v 选项，则会打印 Condition express 的具体值和执行结果，方便确认。
 二、monitor
对匹配 class-pattern／method-pattern／condition-express的类、方法的调用进行监控。
monitor 命令是一个非实时返回命令。

实时返回命令是输入之后立即返回，而非实时返回的命令，则是不断的等待目标 Java 进程返回信息，直到用户输入 Ct ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/43dc34ff.html" title="Arthas 初探（4）——Class 命令">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover6.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Arthas 初探（4）——Class 命令"></a></div><div class="recent-post-info"><a class="article-title" href="/43dc34ff.html" title="Arthas 初探（4）——Class 命令">Arthas 初探（4）——Class 命令</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-user article-meta__icon"></i><span class="article-meta-label">Jitwxs</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-27T08:55:36.000Z" title="发表于 2020-12-27 16:55:36">2020-12-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Java/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/">性能分析</a></span></div><div class="content"> 一、前言
在本章节中，将学习以下 Arthas 的 Class 相关命令，同时我也会附上官方文档的链接，方便大家查阅：

sc Search Class 查看运行中的类信息
sm Search Method 查看类中方法的信息
jad 反编译字节码为源代码
mc Memory Compile 将源代码编译成字节码
redefine 将编译好的字节码文件加载到 JVM 中运行
dump 将已加载类的 bytecode 下载到特定目录
classloader 查看 classloader 的继承树，urls，类加载信息

 二、sc
sc 是 Search-Class 的缩写，用于查看 JVM 已加载的类信息，这个命令能搜索出所有已经加载到 JVM 中的 Class 信息。

class-pattern支持全限定名，如com.taobao.test.AAA，也支持com/taobao/test/AAA 这样的格式，这样，我们从异常堆栈里面把类名拷贝过来的时候，不需要在手动把 / 替换为 .
sc 默认开启了子类匹配功能，也就是说所有当前类的子类也会被搜索出来，想要精确的匹配，请打开 op ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/e88e6355.html" title="Arthas 初探（3）——JVM 命令">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover24.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Arthas 初探（3）——JVM 命令"></a></div><div class="recent-post-info"><a class="article-title" href="/e88e6355.html" title="Arthas 初探（3）——JVM 命令">Arthas 初探（3）——JVM 命令</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-user article-meta__icon"></i><span class="article-meta-label">Jitwxs</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-26T12:28:17.000Z" title="发表于 2020-12-26 20:28:17">2020-12-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Java/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/">性能分析</a></span></div><div class="content"> 一、前言
在本章节中，将学习以下 Arthas 的 JVM 相关命令，同时我也会附上官方文档的链接，方便大家查阅：

dashboard 仪表板，可以显示：线程，内存，堆栈，GC，Runtime 等信息
thread 显示线程的堆栈
jvm 显示 JAVA 虚拟机信息
sysprop 显示 JVM 中系统属性，也可以修改某个属性
sysenv 显示 JVM 中系统环境变量配置信息
vmoption 显示 JVM 中选项信息
getstatic 获取类中静态成员变量
ognl 执行一条 ognl 表达式，对象图导航语言

 二、dashboard
显示当前系统的实时数据面板，按 q 或 ctrl+c 退出。

 2.1 数据说明



列名
描述




ID
Java 级别的线程ID，注意这个 ID 不能跟 jstack 中的 nativeID 一一对应


NAME
线程名


GROUP
线程组名


PRIORITY
线程优先级, 1~10之间的数字，越大表示优先级越高


STATE
线程的状态


%CPU
线程消耗的 CPU 占比，采样 100ms，将所有线程在这 100 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/85dcbb69.html" title="Arthas 初探（2）——基础命令">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover7.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Arthas 初探（2）——基础命令"></a></div><div class="recent-post-info"><a class="article-title" href="/85dcbb69.html" title="Arthas 初探（2）——基础命令">Arthas 初探（2）——基础命令</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-user article-meta__icon"></i><span class="article-meta-label">Jitwxs</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-26T12:00:34.000Z" title="发表于 2020-12-26 20:00:34">2020-12-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Java/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/">性能分析</a></span></div><div class="content"> 一、前言
在本章节中，将学习以下 Arthas 的基础命令，同时我也会附上官方文档的链接，方便大家查阅：

help、cls、session、version、history、quit、stop
cat 显示文本文件内容
grep 对内容进行过滤，只显示关心的行
pwd 显示当前的工作路径
reset 重置 arthas 增强的类
keymap 显示所有的快捷键

 二、基础命令
 2.1 help、cls、session、version、quit、stop
（1）help
查看命令帮助信息。

（2）cls
清空当前屏幕区域。
（3）session
查看当前会话的信息。
12345[arthas@8452]$ session Name        Value-------------------------------------------------- JAVA_PID    8452 SESSION_ID  1434a3fe-8bbe-44ad-90d8-1a0bf2c7e461
（4）version
输出当前目标 Java 进程所加载的 Arthas 版本号。
12[art ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/a64edcb1.html" title="Arthas 初探（1）——快速入门">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover24.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Arthas 初探（1）——快速入门"></a></div><div class="recent-post-info"><a class="article-title" href="/a64edcb1.html" title="Arthas 初探（1）——快速入门">Arthas 初探（1）——快速入门</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-user article-meta__icon"></i><span class="article-meta-label">Jitwxs</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-26T10:11:40.000Z" title="发表于 2020-12-26 18:11:40">2020-12-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Java/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/">性能分析</a></span></div><div class="content"> 一、前言
早就听闻阿里开源的 Arthas 在做 Java 应用诊断上十分牛逼，身边也有很多同事在使用，因此决定开一个坑，自己从零学习下这个工具的使用，本系列使用的版本是当前最新版 3.4.5。
由于 Arthas 经过这么长时间的发展，本身文档、在线教程已经十分健全了，同时还有第三方的 IDEA 插件、许多教学视频去帮助我们入门使用，因此这个系列的文章定位是个人笔记，而并非教程，希望不要误人子弟。
 二、概述

https://arthas.aliyun.com

当你遇到以下类似问题而束手无策时，Arthas可以帮助你解决：

这个类从哪个 jar 包加载的？为什么会报各种类相关的 Exception？
我改的代码为什么没有执行到？难道是我没 commit？分支搞错了？
遇到问题无法在线上 debug，难道只能通过加日志再重新发布吗？
线上遇到某个用户的数据处理有问题，但线上同样无法 debug，线下无法重现！
是否有一个全局视角来查看系统的运行状况？
有什么办法可以监控到JVM的实时运行状态？
怎么快速定位应用的热点，生成火焰图？

使用 Arthas 需要 JDK 版本在 1 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/c72fb74.html" title="详解 JDK 常用监控工具">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover7.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="详解 JDK 常用监控工具"></a></div><div class="recent-post-info"><a class="article-title" href="/c72fb74.html" title="详解 JDK 常用监控工具">详解 JDK 常用监控工具</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-user article-meta__icon"></i><span class="article-meta-label">Jitwxs</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-26T06:23:54.000Z" title="发表于 2020-12-26 14:23:54">2020-12-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Java/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/">性能分析</a></span></div><div class="content"> 一、JVM 参数
JVM 参数类型主要分为标准参数、X 参数、XX 参数三类。
（1）对于标准参数，在 JVM 的各个版本中基本是不变的，相对是比较稳定的。例如 -help、-version、-server、-client 等。

（2）X 参数是非标准化参数，在不同的 JVM 版本中可能会发生变化。例如：

-Xint：完全解释执行，不编译成本地代码
-Xcomp：第一次使用就编译成本地代码
-Xmixed：混合模式，JVM自行决定是否编译成本地代码（默认模式）

（3）XX 参数是我们使用最为经常的参数，它也是非标准化参数，主要用于 JVM 调优和 Debug。它分为 Boolean 类型和键值对类型。
123Boolean 类型格式：-XX:[+-]&lt;name&gt; 表示启用或禁用 name 属性例如：-XX:+UseConcMarkSweepGC
123键值对类型格式：-XX:&lt;name&gt;=&lt;value&gt; 表示 name 属性的值是 value例如：-XX:MaxGCPauseMillis=500
各大 JVM 的相关参数可以到这个网站去查询： ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/f8cb808a.html" title="解决 JVM 异常栈丢失问题">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="解决 JVM 异常栈丢失问题"></a></div><div class="recent-post-info"><a class="article-title" href="/f8cb808a.html" title="解决 JVM 异常栈丢失问题">解决 JVM 异常栈丢失问题</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-user article-meta__icon"></i><span class="article-meta-label">Jitwxs</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-19T14:13:44.000Z" title="发表于 2020-12-19 22:13:44">2020-12-19</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span></div><div class="content">JVM 默认情况下，当代码的某一个位置高频率抛出同一异常时，为了节约性能，JVM 会对以下异常类型的异常栈进行优化，不再打印完整异常栈。

NullPointerException
ArithmeticException
ArrayIndexOutOfBoundsException
ArrayStoreException
ClassCastException


往往出现这种情况，只能期望找到最初报错的日志，去找到具体的异常行。
除此之外，我们可以通过指定 OmitStackTraceInFastThrow 这个 JVM 参数去关掉这个优化，仅需要在应用启动参数中添加如下即可：
1-XX:-OmitStackTraceInFastThrow

这个参数对于大部分类型的 JVM 都是适用的，已在 HotSpot 和 Zing上验证可行，可以点击这里查询各厂商 JVM 参数列表。

在 IDEA 中的话，配置如下即可：

另外需要注意的是，不加控制的打印异常栈，对 CPU 和内存都会有影响。最好在出现异常后尽快解决，或对异常打印增加频率控制。总之就是这个思想，懂就行。
</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/d00bfcd.html" title="Java 并发编程——CompletableFuture">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java 并发编程——CompletableFuture"></a></div><div class="recent-post-info"><a class="article-title" href="/d00bfcd.html" title="Java 并发编程——CompletableFuture">Java 并发编程——CompletableFuture</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-user article-meta__icon"></i><span class="article-meta-label">Jitwxs</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-12T10:10:44.000Z" title="发表于 2020-12-12 18:10:44">2020-12-12</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">并发编程</a></span></div><div class="content"> 一、前言
本文向大家安利一下 JDK 8 中的并发工具类 CompletableFuture，利用它可以方便的进行并发、异步的流式、协调操作。自从用了它，一下次就不想用 CountdownLatch 和 Future 了，赶紧一起来了解下吧。
 二、实例化
CompletableFuture 提供了两组静态方法来实例化出对象，如下所示。
12345CompletableFuture.runAsync(Runnable runnable);CompletableFuture.runAsync(Runnable runnable, Executor executor);CompletableFuture.supplyAsync(Supplier&lt;U&gt; supplier);CompletableFuture.supplyAsync(Supplier&lt;U&gt; supplier, Executor executor)

runAsync() 方法接收的是 Runnable 实例，用于异步任务不需要返回值的情况
supplyAsync() 方法接受的是 Supplier 实 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/e2390047.html" title="Slf4j 包冲突问题原因与解决">     <img class="post_bg" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Slf4j 包冲突问题原因与解决"></a></div><div class="recent-post-info"><a class="article-title" href="/e2390047.html" title="Slf4j 包冲突问题原因与解决">Slf4j 包冲突问题原因与解决</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-user article-meta__icon"></i><span class="article-meta-label">Jitwxs</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-06T15:57:23.000Z" title="发表于 2020-12-06 23:57:23">2020-12-06</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Java/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6/">日志框架</a></span></div><div class="content"> 一、前言
在进行 Java 开发时，通常我们会选择 Slf4j 作为日志门面，但日志实现却不尽相同。如果系统运行中同时存在多个日志实现，就会出现类似下图的 Warning。

 二、问题原因
我们知道 SpringBoot 默认使用的日志实现是 Logback，因此我们尝试在项目中引入 Log4j 的依赖时，就复现了上图的报错。
1234&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;&lt;/dependency&gt;
上图报错告知我们存在多个 SLF4J bingdings，分别位于 logback 和 log4j 包中，有两个 StaticLoggerBinder。
我们知道使用 Slf4j ，需要 LoggerFactory.getLogger()  方法获取实例。
1234import org.slf4j.Logger;import o ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/#content-inner">23</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/configuration/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jitwxs</div><div class="author-info__description">不忘初心，砥砺前行</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">229</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">133</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">40</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/jitwxs"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/jitwxs" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=Ujg7JiUqIRI0PSo-Mzs_fDE9Pw" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a><a class="social-icon" href="https://jitwxs.blog.csdn.net" target="_blank" title="CSDN"><i class="fab fa-cuttlefish flat-btn"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">专注 Java 后端开发，内容涵盖 SpringBoot、并发编程、微服务、容器化、Linux 等技术分享。</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/208fa04c.html" title="Mockito 源码分析（4）——Annotation"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mockito 源码分析（4）——Annotation"/></a><div class="content"><a class="title" href="/208fa04c.html" title="Mockito 源码分析（4）——Annotation">Mockito 源码分析（4）——Annotation</a><time datetime="2021-09-21T13:52:51.000Z" title="发表于 2021-09-21 21:52:51">2021-09-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/921b3e8a.html" title="Mockito 源码分析（3）——When 与 Then 与 Verify"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover21.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mockito 源码分析（3）——When 与 Then 与 Verify"/></a><div class="content"><a class="title" href="/921b3e8a.html" title="Mockito 源码分析（3）——When 与 Then 与 Verify">Mockito 源码分析（3）——When 与 Then 与 Verify</a><time datetime="2021-09-20T12:32:05.000Z" title="发表于 2021-09-20 20:32:05">2021-09-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/cb1af043.html" title="Mockito 源码分析（2）——Mock 与 Spy"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover4.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mockito 源码分析（2）——Mock 与 Spy"/></a><div class="content"><a class="title" href="/cb1af043.html" title="Mockito 源码分析（2）——Mock 与 Spy">Mockito 源码分析（2）——Mock 与 Spy</a><time datetime="2021-09-20T01:48:47.000Z" title="发表于 2021-09-20 09:48:47">2021-09-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/f9625997.html" title="Mockito 源码分析（1）——基础概念"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mockito 源码分析（1）——基础概念"/></a><div class="content"><a class="title" href="/f9625997.html" title="Mockito 源码分析（1）——基础概念">Mockito 源码分析（1）——基础概念</a><time datetime="2021-09-20T01:02:35.000Z" title="发表于 2021-09-20 09:02:35">2021-09-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/e5e60178.html" title="Protobuf 与 JSON 的互相转换"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/jitwxs/cdn/blog/top/cover24.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Protobuf 与 JSON 的互相转换"/></a><div class="content"><a class="title" href="/e5e60178.html" title="Protobuf 与 JSON 的互相转换">Protobuf 与 JSON 的互相转换</a><time datetime="2021-08-29T11:42:45.000Z" title="发表于 2021-08-29 19:42:45">2021-08-29</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/HoloLens/"><span class="card-category-list-name">HoloLens</span><span class="card-category-list-count">12</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">59</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/Disruptor/"><span class="card-category-list-name">Disruptor</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/Protobuf/"><span class="card-category-list-name">Protobuf</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"><span class="card-category-list-name">并发编程</span><span class="card-category-list-count">15</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/"><span class="card-category-list-name">性能分析</span><span class="card-category-list-count">11</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6/"><span class="card-category-list-name">日志框架</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="card-category-list-name">设计模式</span><span class="card-category-list-count">3</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 1.2em; color: rgb(174, 107, 192)">总结</a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 1.15em; color: rgb(43, 22, 11)">面试</a><a href="/tags/ActiveMQ/" style="font-size: 1.25em; color: rgb(175, 136, 26)">ActiveMQ</a><a href="/tags/Ajax/" style="font-size: 1.15em; color: rgb(65, 112, 64)">Ajax</a><a href="/tags/Javascript/" style="font-size: 1.2em; color: rgb(135, 66, 7)">Javascript</a><a href="/tags/Arthas/" style="font-size: 1.4em; color: rgb(114, 123, 114)">Arthas</a><a href="/tags/%E7%81%AB%E7%84%B0%E5%9B%BE/" style="font-size: 1.15em; color: rgb(148, 58, 75)">火焰图</a><a href="/tags/%E8%B7%A8%E5%9F%9F/" style="font-size: 1.15em; color: rgb(2, 89, 182)">跨域</a><a href="/tags/Vue/" style="font-size: 1.15em; color: rgb(160, 80, 81)">Vue</a><a href="/tags/Axiso/" style="font-size: 1.15em; color: rgb(82, 167, 121)">Axiso</a><a href="/tags/Disruptor/" style="font-size: 1.3em; color: rgb(199, 29, 146)">Disruptor</a><a href="/tags/Dubbo/" style="font-size: 1.15em; color: rgb(29, 162, 116)">Dubbo</a><a href="/tags/Zookeeper/" style="font-size: 1.2em; color: rgb(125, 81, 40)">Zookeeper</a><a href="/tags/Eclipse/" style="font-size: 1.15em; color: rgb(107, 64, 160)">Eclipse</a><a href="/tags/Elasticsearch/" style="font-size: 1.35em; color: rgb(100, 192, 29)">Elasticsearch</a><a href="/tags/%E7%B4%A2%E5%BC%95/" style="font-size: 1.15em; color: rgb(39, 1, 14)">索引</a><a href="/tags/Freemarker/" style="font-size: 1.15em; color: rgb(153, 181, 36)">Freemarker</a><a href="/tags/GCC/" style="font-size: 1.15em; color: rgb(145, 82, 16)">GCC</a><a href="/tags/Git/" style="font-size: 1.45em; color: rgb(95, 60, 65)">Git</a><a href="/tags/SpringBoot/" style="font-size: 1.45em; color: rgb(130, 60, 196)">SpringBoot</a><a href="/tags/UML/" style="font-size: 1.15em; color: rgb(127, 146, 176)">UML</a><a href="/tags/%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/" style="font-size: 1.15em; color: rgb(95, 23, 107)">动态代理</a><a href="/tags/AOP/" style="font-size: 1.2em; color: rgb(173, 63, 169)">AOP</a><a href="/tags/Fail-Fast/" style="font-size: 1.15em; color: rgb(15, 156, 58)">Fail Fast</a><a href="/tags/Fail-Safe/" style="font-size: 1.15em; color: rgb(38, 154, 191)">Fail Safe</a><a href="/tags/%E8%B8%A9%E5%9D%91%E4%B9%8B%E8%B7%AF/" style="font-size: 1.2em; color: rgb(58, 154, 181)">踩坑之路</a><a href="/tags/%E4%B8%89%E6%96%B9%E6%94%AF%E4%BB%98/" style="font-size: 1.15em; color: rgb(37, 3, 38)">三方支付</a><a href="/tags/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE/" style="font-size: 1.15em; color: rgb(116, 172, 114)">双亲委派</a><a href="/tags/%E9%98%9F%E5%88%97/" style="font-size: 1.25em; color: rgb(69, 129, 146)">队列</a><a href="/tags/ArrayBlockingQueue/" style="font-size: 1.15em; color: rgb(194, 56, 0)">ArrayBlockingQueue</a><a href="/tags/CyclicBarrier/" style="font-size: 1.15em; color: rgb(94, 77, 105)">CyclicBarrier</a><a href="/tags/Thread/" style="font-size: 1.15em; color: rgb(14, 20, 189)">Thread</a><a href="/tags/XML/" style="font-size: 1.15em; color: rgb(166, 176, 123)">XML</a><a href="/tags/Optional/" style="font-size: 1.15em; color: rgb(170, 54, 121)">Optional</a><a href="/tags/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" style="font-size: 1.15em; color: rgb(194, 37, 60)">文件系统</a><a href="/tags/Linux/" style="font-size: 1.15em; color: rgb(198, 87, 88)">Linux</a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.15em; color: rgb(89, 33, 118)">数据库</a><a href="/tags/Tomcat/" style="font-size: 1.15em; color: rgb(164, 84, 112)">Tomcat</a><a href="/tags/%E9%9D%99%E6%80%81%E5%BA%93/" style="font-size: 1.15em; color: rgb(130, 79, 91)">静态库</a><a href="/tags/%E5%8A%A8%E6%80%81%E5%BA%93/" style="font-size: 1.15em; color: rgb(33, 163, 4)">动态库</a></div></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">229</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2016-11-12T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">567.6k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-09-25T04:19:40.918Z"></div></div></div></div></div></div></main><footer id="footer" style="background: linear-gradient(135deg,"><div id="footer-wrap"><div class="copyright">&copy;2016 - 2021 By Jitwxs</div><div class="footer_custom_text"><a target="_blank" rel="noopener" href='http://www.beian.miit.gov.cn/state/outPortal/loginPortal.action'><img class='icp-icon entered loading' src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src='/img/icp.png' alt='ICP' data-ll-status='loading'>苏 ICP 备 16061429 号</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const findTrueUrl = (array) => {
    Promise.all(array.map(item =>
      fetch(item.url).then(resp => resp.json()).then(data => {
        const urlArray = data.body.match(/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?/ig)
        if (data.user.login === 'utterances-bot') {
          return urlArray.pop()
        } else {
          return urlArray.shift()
        }
      })
    )).then(res => {
        array = array.map((i,index)=> {
          return {
            ...i,
            url: res[index]
          }
        })

        saveToLocal.set('github-newest-comments', JSON.stringify(array), 10/(60*24))
        generateHtml(array)
    });
  }

  const getComment = () => {
    fetch('https://api.github.com/repos/jitwxs/blog-comment/issues/comments?sort=updated&direction=desc&per_page=6&page=1',{
      "headers": {
        Accept: 'application/vnd.github.v3.html+json'
      }
    })
      .then(response => response.json())
      .then(data => {
        const githubArray = data.map(item => {
          return {
            'avatar': item.user.avatar_url,
            'content': changeContent(item.body_html),
            'nick': item.user.login,
            'url': item.issue_url,
            'date': item.updated_at,
            'githubUrl': item.html_url
          }
        })
        findTrueUrl(githubArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('github-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="5273081683" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" data-lrctype="1" muted></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.17.0/js/md5.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: true,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.removeEventListener('scroll', window.tocScrollFn)
  window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', 'G-40VH67TNSM', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start -->
  <script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://python-github-calendar-api.vercel.app/api?jitwxs";
            var git_color =['#ebedf0', '#fdcdec', '#fc9bd9', '#fa6ac5', '#f838b2', '#f5089f', '#c4067e', '#92055e', '#540336', '#48022f', '#30021f'];
            var git_user ="jitwxs";
            var parent_div_git = document.getElementById('about-github-calendar');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/about/'){
                console.log('已挂载github calendar')
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('about-github-calendar')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><script data-pjax>function history_calendar_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>那年今日</span></div><div id="history-baidu" style="height: 80px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
                console.log('已挂载history_calendar')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            history_calendar_injector_config()
        } </script><script data-pjax  src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><!-- hexo injector body_end end --></body></html>